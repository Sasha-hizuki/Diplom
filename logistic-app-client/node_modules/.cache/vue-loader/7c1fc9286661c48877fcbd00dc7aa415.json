{"remainingRequest":"C:\\Users\\512Dell\\OneDrive\\Рабочий стол\\Logistic-main\\logistic-app-client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\512Dell\\OneDrive\\Рабочий стол\\Logistic-main\\logistic-app-client\\src\\components\\Map.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\512Dell\\OneDrive\\Рабочий стол\\Logistic-main\\logistic-app-client\\src\\components\\Map.vue","mtime":1611580929000},{"path":"C:\\Users\\512Dell\\OneDrive\\Рабочий стол\\Logistic-main\\logistic-app-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678708696770},{"path":"C:\\Users\\512Dell\\OneDrive\\Рабочий стол\\Logistic-main\\logistic-app-client\\node_modules\\babel-loader\\lib\\index.js","mtime":1678708698293},{"path":"C:\\Users\\512Dell\\OneDrive\\Рабочий стол\\Logistic-main\\logistic-app-client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678708696770},{"path":"C:\\Users\\512Dell\\OneDrive\\Рабочий стол\\Logistic-main\\logistic-app-client\\node_modules\\vue-loader\\lib\\index.js","mtime":1678708698721}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSGVyZU1hcCIsCiAgZGF0YSgpewogICAgcmV0dXJuewogICAgICBwbGF0Zm9ybToge30sCiAgICAgIG1hcDoge30sCiAgICAgIHJvdXRpbmdTZXJ2aWNlOiB7fQogICAgfQogIH0sCiAgcHJvcHM6IHsKICAgIGFwaUtleTogU3RyaW5nLAogICAgY2VudGVyOiBPYmplY3QsCiAgICB6b29tOiBTdHJpbmcKICB9LAogIGNyZWF0ZWQoKXsgICAgCiAgICBjb25zdCBIID0gd2luZG93Lkg7CiAgICB0aGlzLnBsYXRmb3JtID0gbmV3IEguc2VydmljZS5QbGF0Zm9ybSh7CiAgICAgICJhcGlLZXkiOiAiaG1FbFZJdjhpbkJ2SERFZzB5d0JrNWJBc1lPWEcwOUVsRzVNbmFfRm1kayIKICAgIH0pOwogICAgdGhpcy5yb3V0aW5nU2VydmljZSA9IHRoaXMucGxhdGZvcm0uZ2V0Um91dGluZ1NlcnZpY2UoKTsKICAgIHRoaXMuJHJvb3QuJHJlZnMuTWFwQ29tcG9uZW50ID0gdGhpcwogIH0sCiAgbW91bnRlZCgpewogICAgY29uc3QgSCA9IHdpbmRvdy5IOwogICAgdGhpcy5tYXAgPSBuZXcgSC5NYXAoCiAgICAgIHRoaXMuJHJlZnMubWFwLAogICAgICB0aGlzLnBsYXRmb3JtLmNyZWF0ZURlZmF1bHRMYXllcnMoKS52ZWN0b3Iubm9ybWFsLm1hcCwKICAgICAgewogICAgICAgIHpvb206IDYsCiAgICAgICAgY2VudGVyOiB7IGxhdDogdGhpcy5jZW50ZXIubGF0LCBsbmc6IHRoaXMuY2VudGVyLmxuZ30KICAgICAgfQogICAgKTsKICAgICAgbmV3IEgubWFwZXZlbnRzLkJlaGF2aW9yKG5ldyBILm1hcGV2ZW50cy5NYXBFdmVudHModGhpcy5tYXApKTsKICAgICAgdmFyIG1hcHR5cGVzID0gdGhpcy5wbGF0Zm9ybS5jcmVhdGVEZWZhdWx0TGF5ZXJzKCk7CiAgICAgIEgudWkuVUkuY3JlYXRlRGVmYXVsdCh0aGlzLm1hcCwgbWFwdHlwZXMpOwogIH0sCiAgbWV0aG9kczp7CiAgICBkcm9wT3JkZXI6IGZ1bmN0aW9uKG9yZGVyKXsKICAgICAgdGhpcy5yZW1vdmVPcmRlcigpOwogICAgICBjb25zdCBIID0gd2luZG93Lkg7CiAgICAgIC8vIGxldCBmcm9tSW1hZ2UgPSAnJzsKICAgICAgLy8gbGV0IHRvSW1hZ2UgPSAnJzsKICAgICAgLy8gbGV0IGZyb21JY29uID0gbmV3IEgubWFwLkljb24oZnJvbUltYWdlKTsKICAgICAgLy8gbGV0IHRvSWNvbiA9IG5ldyBILm1hcC5JY29uKHRvSW1hZ2UpOwogICAgICBsZXQgZnJvbU1hcmtlciA9IG5ldyBILm1hcC5NYXJrZXIoCiAgICAgICAgeyAKICAgICAgICAgIGxhdDpvcmRlci5mcm9tTG9jYXRpb24uc3BsaXQoJywnKVswXSwgCiAgICAgICAgICBsbmc6b3JkZXIuZnJvbUxvY2F0aW9uLnNwbGl0KCcsJylbMV0KICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIC8vaWNvbjpmcm9tSWNvbgogICAgICAgIH0KICAgICAgKTsKICAgICAgbGV0IHRvTWFya2VyID0gbmV3IEgubWFwLk1hcmtlcigKICAgICAgICB7IAogICAgICAgICAgbGF0Om9yZGVyLnRvTG9jYXRpb24uc3BsaXQoJywnKVswXSwgCiAgICAgICAgICBsbmc6b3JkZXIudG9Mb2NhdGlvbi5zcGxpdCgnLCcpWzFdCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICAvL2ljb246dG9JY29uCiAgICAgICAgfQogICAgICApOwogICAgICB0aGlzLm1hcC5hZGRPYmplY3QoZnJvbU1hcmtlcik7CiAgICAgIHRoaXMubWFwLmFkZE9iamVjdCh0b01hcmtlcik7CiAgICAgIHRoaXMuZHJhd1JvdXRlKG9yZGVyLmZyb21Mb2NhdGlvbiwgb3JkZXIudG9Mb2NhdGlvbik7CiAgICB9LAogICAgcmVtb3ZlT3JkZXI6IGZ1bmN0aW9uKCl7CiAgICAgIHRoaXMubWFwLnJlbW92ZU9iamVjdHModGhpcy5tYXAuZ2V0T2JqZWN0cygpKQogICAgfSwKICAgIGFzeW5jIGRyYXdSb3V0ZShzdGFydCwgZmluaXNoKXsKICAgICAgY29uc3QgSCA9IHdpbmRvdy5IOwogICAgICBhd2FpdCB0aGlzLnJvdXRpbmdTZXJ2aWNlLmNhbGN1bGF0ZVJvdXRlKAogICAgICAgIHsKICAgICAgICAgICJtb2RlIjoiZmFzdGVzdDtjYXI7dHJhZmZpYzplbmFibGVkIiwKICAgICAgICAgICJ3YXlwb2ludDAiOmAke3N0YXJ0LnNwbGl0KCcsJylbMF19LCR7c3RhcnQuc3BsaXQoJywnKVsxXX1gLAogICAgICAgICAgIndheXBvaW50MSI6YCR7ZmluaXNoLnNwbGl0KCcsJylbMF19LCR7ZmluaXNoLnNwbGl0KCcsJylbMV19YCwKICAgICAgICAgICJyZXByZXNlbnRhdGlvbiI6ImRpc3BsYXkiCiAgICAgICAgfSwKICAgICAgICBkYXRhID0+IHsKICAgICAgICAgIGlmKGRhdGEucmVzcG9uc2Uucm91dGUubGVuZ3RoID4gMCl7CiAgICAgICAgICAgIGxldCBsaW5lU3RyaW5nID0gbmV3IEguZ2VvLkxpbmVTdHJpbmcoKTsKICAgICAgICAgICAgZGF0YS5yZXNwb25zZS5yb3V0ZVswXS5zaGFwZS5mb3JFYWNoKHBvaW50ID0+IHsKICAgICAgICAgICAgICBsZXQgW2xhdCwgbG5nXSA9IHBvaW50LnNwbGl0KCIsIik7CiAgICAgICAgICAgICAgbGluZVN0cmluZy5wdXNoUG9pbnQoe2xhdDpsYXQsbG5nOmxuZ30pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbGV0IHBvbHlsaW5lID0gbmV3IEgubWFwLlBvbHlsaW5lKAogICAgICAgICAgICAgIGxpbmVTdHJpbmcsCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgc3R5bGU6ewogICAgICAgICAgICAgICAgICBsaW5lV2lkdGg6IDUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHRoaXMubWFwLmFkZE9iamVjdChwb2x5bGluZSk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBlcnJvciA9PiB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKQogICAgICAgIH0KICAgICAgKTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Map.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Map.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"map\" id=\"map\">\n      <div id=\"mapContainer\" style=\"height:100%;width:100%\" ref=\"map\"></div>\n    </div>\n</template>\n\n<script>\nexport default {\n  name: \"HereMap\",\n  data(){\n    return{\n      platform: {},\n      map: {},\n      routingService: {}\n    }\n  },\n  props: {\n    apiKey: String,\n    center: Object,\n    zoom: String\n  },\n  created(){    \n    const H = window.H;\n    this.platform = new H.service.Platform({\n      \"apiKey\": \"hmElVIv8inBvHDEg0ywBk5bAsYOXG09ElG5Mna_Fmdk\"\n    });\n    this.routingService = this.platform.getRoutingService();\n    this.$root.$refs.MapComponent = this\n  },\n  mounted(){\n    const H = window.H;\n    this.map = new H.Map(\n      this.$refs.map,\n      this.platform.createDefaultLayers().vector.normal.map,\n      {\n        zoom: 6,\n        center: { lat: this.center.lat, lng: this.center.lng}\n      }\n    );\n      new H.mapevents.Behavior(new H.mapevents.MapEvents(this.map));\n      var maptypes = this.platform.createDefaultLayers();\n      H.ui.UI.createDefault(this.map, maptypes);\n  },\n  methods:{\n    dropOrder: function(order){\n      this.removeOrder();\n      const H = window.H;\n      // let fromImage = '';\n      // let toImage = '';\n      // let fromIcon = new H.map.Icon(fromImage);\n      // let toIcon = new H.map.Icon(toImage);\n      let fromMarker = new H.map.Marker(\n        { \n          lat:order.fromLocation.split(',')[0], \n          lng:order.fromLocation.split(',')[1]\n        },\n        {\n          //icon:fromIcon\n        }\n      );\n      let toMarker = new H.map.Marker(\n        { \n          lat:order.toLocation.split(',')[0], \n          lng:order.toLocation.split(',')[1]\n        },\n        {\n          //icon:toIcon\n        }\n      );\n      this.map.addObject(fromMarker);\n      this.map.addObject(toMarker);\n      this.drawRoute(order.fromLocation, order.toLocation);\n    },\n    removeOrder: function(){\n      this.map.removeObjects(this.map.getObjects())\n    },\n    async drawRoute(start, finish){\n      const H = window.H;\n      await this.routingService.calculateRoute(\n        {\n          \"mode\":\"fastest;car;traffic:enabled\",\n          \"waypoint0\":`${start.split(',')[0]},${start.split(',')[1]}`,\n          \"waypoint1\":`${finish.split(',')[0]},${finish.split(',')[1]}`,\n          \"representation\":\"display\"\n        },\n        data => {\n          if(data.response.route.length > 0){\n            let lineString = new H.geo.LineString();\n            data.response.route[0].shape.forEach(point => {\n              let [lat, lng] = point.split(\",\");\n              lineString.pushPoint({lat:lat,lng:lng});\n            });\n            let polyline = new H.map.Polyline(\n              lineString,\n              {\n                style:{\n                  lineWidth: 5\n                }\n              }\n            );\n            this.map.addObject(polyline);\n          }\n        },\n        error => {\n          console.error(error)\n        }\n      );\n    }\n  }\n}\n</script>\n\n<style>\n.map {\n  height: 100vh;\n}   \n</style>"]}]}