import e from"react";import n from"prop-types";function t(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}!function(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".dropd {\n  color: #7a8ca0;\n  user-select: none;\n  text-align: left;\n  min-width: 100px;\n  position: relative;\n  display: inline-flex; }\n  .dropd[data-open='true'] .dropd-caret {\n    transform: rotate(-180deg); }\n  .dropd * {\n    outline-width: 1px;\n    box-sizing: border-box;\n    outline-color: #3599e7; }\n\n.dropd-toggle {\n  margin: 0;\n  height: 43px;\n  width: 100%;\n  border: none;\n  padding: 10px;\n  display: flex;\n  cursor: pointer;\n  overflow: hidden;\n  font-weight: 300;\n  align-items: center;\n  outline-color: #fff;\n  white-space: no-wrap;\n  -webkit-appearance: none;\n  background-color: #ffffff;\n  border: 1px solid #e8ecf3;\n  background-color: transparent;\n  justify-content: space-between;\n  -webkit-tap-highlight-color: transparent; }\n  .dropd-toggle .dropd-caret {\n    width: 6px;\n    height: 100%;\n    display: flex;\n    margin-left: 20px;\n    transform: rotate(0);\n    transition: 300ms linear; }\n    .dropd-toggle .dropd-caret:focus {\n      outline: 0 none; }\n    .dropd-toggle .dropd-caret svg {\n      width: inherit;\n      height: inherit;\n      overflow: hidden; }\n      .dropd-toggle .dropd-caret svg use,\n      .dropd-toggle .dropd-caret svg path {\n        fill: currentColor; }\n\n.dropd-current {\n  color: #2c3c4f;\n  display: block;\n  overflow: hidden;\n  text-align: left;\n  position: relative;\n  white-space: nowrap; }\n\n.dropd-list {\n  left: 0;\n  top: 40px;\n  opacity: 0;\n  z-index: -9;\n  width: 100%;\n  padding: 5px 0;\n  margin: 2px 0 0;\n  list-style: none;\n  text-align: left;\n  box-shadow: none;\n  font-size: 0.9em;\n  min-width: 200px;\n  max-height: 300px;\n  position: absolute;\n  border-radius: 4px;\n  pointer-events: none;\n  transform-origin: top;\n  overflow: hidden auto;\n  border: 1px solid #e8ecf3;\n  background-color: #ffffff;\n  transform: scaleY(0.8) translateY(-10px);\n  transition: 250ms 100ms, box-shadow 200ms 100ms; }\n  .dropd-list.open {\n    opacity: 1;\n    z-index: 1000;\n    pointer-events: auto;\n    transform: scaleY(1) translateY(0px);\n    box-shadow: 0 4px 10px rgba(32, 49, 70, 0.08); }\n  .dropd-list .dropd-item {\n    margin: 0;\n    width: 100%;\n    display: block;\n    color: #7a8ca0;\n    list-style: none;\n    text-align: left;\n    overflow: hidden;\n    position: relative;\n    font-weight: normal;\n    white-space: nowrap;\n    transition: background 300ms, color 100ms; }\n    .dropd-list .dropd-item:hover {\n      color: #2c3c4f;\n      background: #f9fafc; }\n    .dropd-list .dropd-item a {\n      display: block;\n      color: inherit;\n      cursor: pointer;\n      color: inherit;\n      line-height: 1.6;\n      padding: 10px 20px;\n      white-space: initial; }\n");var a=function(n){var a,l;function i(){for(var o,a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return t(r(o=n.call.apply(n,[this].concat(l))||this),"dropdRef",e.createRef()),t(r(o),"listRef",e.createRef()),t(r(o),"state",{list:[],open:!1,currentItem:null,defaultOpen:!1,revealOn:"mousedown"}),t(r(o),"_isDropdElem",function(e){return-1!==e.indexOf(o.dropdRef.current)}),t(r(o),"_emit",function(e,n,t){var a=new CustomEvent(e,{detail:n});o.dropdRef.current.dispatchEvent(a),"function"==typeof t&&t.call(r(o),n)}),t(r(o),"_emitOpen",function(e){"onOpen"in o.props&&"function"==typeof o.props.onOpen&&o._emit("open",o.props.list,function(n){o.props.onOpen(n,e)})}),t(r(o),"_resetListScroll",function(){setTimeout(function(){o.listRef&&o.listRef.current&&(o.listRef.current.scrollTop=0)},250)}),t(r(o),"closeOnBlurFn",function(e){if(o.props&&o.props.closeOnBlur&&(o._resetListScroll(),o.setState({defaultOpen:!1}),"mousedown"===o.state.revealOn&&o.state.open)){if(o._isDropdElem(e.path))return;o.closeDropd()}}),t(r(o),"handleFocus",function(e){o.state.open||o.setState({open:!0},function(){o._emitOpen(e)})}),t(r(o),"closeDropd",function(){o._resetListScroll(),o.setState({open:!1,defaultOpen:!1})}),t(r(o),"handleItemChange",function(e,n){o.closeDropd(),o.setState({currentItem:e},function(){"onItemChange"in o.props&&"function"==typeof o.props.onItemChange&&o._emit("itemChange",o.state.currentItem,function(e){o.props.onItemChange(e,n)})})}),t(r(o),"toggleDropd",function(e){e.persist(),o._resetListScroll(),o.setState(function(e){return{open:!e.open}},function(){o.state.open&&o._emitOpen(e)})}),o}l=n,(a=i).prototype=Object.create(l.prototype),a.prototype.constructor=a,a.__proto__=l;var s=i.prototype;return s.UNSAFE_componentWillMount=function(){var e=this,n=this.props,t=n.list,o=n.value;this.setState(function(n){return{revealOn:e.props.revealOn,list:[].concat(n.list,t),defaultOpen:e.props.defaultOpen,currentItem:o?o.label||o:null}})},s.componentDidMount=function(){this.props.defaultOpen&&(this._emitOpen(null),this.setState({open:!0})),"mousedown"===this.props.revealOn&&document.addEventListener("mousedown",this.closeOnBlurFn,!1)},s.UNSAFE_componentWillUpdate=function(e){e.revealOn!==this.state.revealOn?this.setState({revealOn:e.revealOn}):e.defaultOpen!==this.state.defaultOpen&&this.setState({defaultOpen:e.defaultOpen})},s.componentWillUnmount=function(){document.removeEventListener("mousedown",this.closeOnBlurFn,!1)},s.render=function(){var n=this,t=this.props.placeholder,r=this.state,a=r.list,l=r.currentItem,i=r.open,s=this.props,p=(s.value,s.onOpen,s.revealOn,s.closeOnBlur,s.defaultOpen,s.onItemChange,s.list,s.placeholder,function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(s,["value","onOpen","revealOn","closeOnBlur","defaultOpen","onItemChange","list","placeholder"]));return e.createElement("div",o({},p,{dir:"auto","data-open":i,ref:this.dropdRef,className:"dropd react-dropd"}),e.createElement("button",{type:"button",tabIndex:"-1",className:"dropd-toggle",onMouseDown:function(e){return n.toggleDropd(e)}},e.createElement("input",{type:"search",autoComplete:"off",readOnly:"readonly",onBlur:this.closeDropd,style:{width:0,height:0,margin:0,padding:0,border:"0 none",outline:"0 none",textAlign:"unset",position:"absolute",WebkitAppearance:"none"},className:"dropd-fake-search",onFocus:function(e){return n.handleFocus(e)}}),!l&&t&&e.createElement("span",{className:"dropd-current is-placeholder"},t.label||t),l&&e.createElement("span",{className:"dropd-current"},l.label||l),e.createElement("span",{className:"dropd-caret","aria-hidden":!0},e.createElement("svg",{width:"6",height:"4",tabIndex:"-1",viewBox:"0 0 6 4",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e.createElement("defs",null,e.createElement("path",{id:"a",tabIndex:"-1",d:"M132.047 389.564l.644-.537a.134.134 0 0 1 .091-.028.124.124 0 0 1 .085.042l2.134 2.438 2.133-2.438a.124.124 0 0 1 .085-.042.137.137 0 0 1 .091.028l.645.537c.025.021.04.05.043.083a.115.115 0 0 1-.03.088l-2.872 3.223a.127.127 0 0 1-.19 0l-2.873-3.223a.116.116 0 0 1-.03-.088.12.12 0 0 1 .044-.083z"})),e.createElement("use",{opacity:".7",fill:"#2c3c4f",xlinkHref:"#a",tabIndex:"-1",transform:"translate(-132 -389)"})))),e.createElement("ul",{ref:this.listRef,"aria-hidden":String(!i),className:"dropd-list"+(i?" open":"")},a&&a.map(function(t,o){return e.createElement("li",{key:o,tabIndex:"-1",className:"dropd-item",onMouseDown:function(e){return n.handleItemChange(t,e)}},e.createElement("a",{tabIndex:"-1",className:"dropd-link"},t.label||t))})))},i}(e.PureComponent);a.propTypes={list:n.array,closeOnBlur:n.bool,defaultOpen:n.bool,onOpen:n.func,onItemChange:n.func,value:n.oneOfType([n.string,n.object]),placeholder:n.oneOfType([n.string,n.object]),revealOn:n.oneOf(["mousedown"])},a.defaultProps={list:[],closeOnBlur:!0,defaultOpen:!1,value:null,placeholder:"Please select an item",revealOn:"mousedown"};export default a;
